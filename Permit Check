<div style="font-family: Arial, sans-serif; background-color: #f7f9fc; padding: 30px; max-width: 600px; margin: auto; border-radius: 8px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);">
  <h3 style="font-size: 1.8em; color: #333; margin-bottom: 20px; text-align: center;">Do You Need a Permit?</h3>

  <label for="category" style="font-weight: bold; margin-bottom: 8px; color: #555; display: block;">Select a Category:</label>
  <select id="category" onchange="handleCategoryChange()" style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 6px; font-size: 1em; background: #f7f9fc;">
    <option value="" selected disabled>Select a category</option>
    <option value="interior">Interior Renovations</option>
    <option value="exterior">Exterior Renovations</option>
    <option value="structural">Structural Renovations</option>
    <option value="environmental">Environmental or Sustainable Changes</option>
    <option value="miscellaneous">Miscellaneous</option>
  </select>

  <div id="project-container" style="display: none;">
    <label for="project" style="font-weight: bold; margin-bottom: 8px; color: #555; display: block;">Select a Project:</label>
    <select id="project" onchange="handleProjectChange()" style="width: 100%; padding: 10px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 6px; font-size: 1em; background: #f7f9fc;">
      <!-- Options will be dynamically populated -->
    </select>
  </div>

  <div id="follow-up-container" style="display: none;">
    <p id="question" style="font-size: 1.2em; margin-bottom: 15px;"></p>
    <button onclick="setResult('yes')" style="padding: 10px 20px; margin: 0 10px; font-size: 1em; color: white; background-color: #d9534f; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease;">Yes</button>
    <button onclick="setResult('no')" style="padding: 10px 20px; margin: 0 10px; font-size: 1em; color: white; background-color: #0275d8; border: none; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease;">No</button>
  </div>

  <div id="result" style="display: none; margin-top: 20px; font-size: 1.2em; padding: 10px; border-radius: 6px;">
  </div>

  <script>
    const categories = {
      interior: [
        { name: "Kitchen Renovation", question: "Are you changing plumbing, electrical, or moving walls?", yes: "Permit required.", no: "No permit typically needed for cosmetic changes like painting, new cabinets, or countertops." },
      { name: "Bathroom Renovation", question: "Are you altering plumbing lines, electrical wiring, or the room layout?", yes: "Permit required.", no: "No permit typically needed for replacing fixtures in the same location." },
      { name: "Removing or Adding Interior Walls", question: "Is the wall load-bearing?", yes: "Permit required.", no: "Permit may not be required, but check with the local building department." },
      { name: "Changing Room Layout or Floor Plan", question: "Are you altering structural elements or changing room use?", yes: "Permit required.", no: "No permit typically needed for non-structural layout changes (e.g., moving furniture)." },
      { name: "Installing or Replacing Fireplaces", question: "Are you installing a gas line or venting system?", yes: "Permit required.", no: "No permit typically needed for electric fireplaces that plug into an outlet." },
      { name: "Attic or Basement Conversion", question: "Will this create a new livable space?", yes: "Permit required.", no: "No permit needed for storage use only." },
      { name: "Installing New Flooring", question: "Are you making structural modifications to support the new flooring?", yes: "Permit required.", no: "No permit typically needed for surface flooring changes like carpet, tile, or hardwood." },
      { name: "Electrical Work", question: "Are you adding new circuits, panels, or rewiring?", yes: "Permit required.", no: "No permit typically needed for replacing an outlet or light fixture." },
      { name: "Plumbing Changes", question: "Are you moving or installing new plumbing lines?", yes: "Permit required.", no: "No permit typically needed for replacing a faucet or toilet in the same location." },
      { name: "HVAC System Installation or Upgrades", question: "Are you adding or replacing ductwork, vents, or an outdoor unit?", yes: "Permit required.", no: "No permit typically needed for changing air filters or a thermostat." },
      { name: "Installing or Replacing Stairs", question: "Are you modifying their height, width, or structural support?", yes: "Permit required.", no: "No permit typically needed for cosmetic upgrades like new treads, railings, or refinishing." },
      { name: "Replacing Windows or Doors", question: "Are you changing the size or location?", yes: "Permit required.", no: "No permit typically needed for replacing windows or doors with the same size in the same location." },
    ],
    exterior: [
      { name: "Building or Expanding a Deck or Patio", question: "Will the deck be more than 30 inches above ground?", yes: "Permit required.", no: "No permit typically needed for low decks and patios (check local height limits)." },
      { name: "Building a Garage", question: "Will it be attached to the house or require utilities?", yes: "Permit required.", no: "No permit typically needed for small detached garages (check size limits with local code)." },
      { name: "Adding a Porch or Sunroom", question: "Will it be enclosed or change the home’s footprint?", yes: "Permit required.", no: "No permit typically needed for an open-air porch without a roof, but check with the local building department." },
      { name: "Installing Fencing or Walls", question: "Will the fence be taller than the city’s height limit?", yes: "Permit required.", no: "No permit typically needed for fences below height limits, but check with the local building department." },
      { name: "Building a Shed or Outdoor Structure", question: "Will it be larger than your city’s limit?", yes: "Permit required.", no: "No permit typically needed for smaller sheds." },
      { name: "Roof Replacement or Repair", question: "Are you replacing a big part of the roof?", yes: "Permit required.", no: "No permit typically needed for minor repairs." },
      { name: "Window or Door Replacement (on exterior walls)", question: "Are you altering the size or structure of the opening?", yes: "Permit required.", no: "No permit typically needed for replacing windows/doors of exactly the same attributes." },
      { name: "Landscaping Changes", question: "Will it change water drainage or involve major grading?", yes: "Permit required.", no: "No permit typically needed for regular landscaping like planting trees, shrubs, or grass." },
      { name: "Exterior Painting", question: "Are you in a historic district or HOA-restricted area?", yes: "Permit may be required (check local regulations and HOA guidelines).", no: "No permit typically needed for painting in unrestricted areas." },
    ],
    structural: [
      { name: "Adding a Second Story or Expanding the Home’s Footprint", question: "", yes: "Permit required.", no: "" },
      { name: "Foundation Repairs or Modifications", question: "Will you be altering load-bearing elements?", yes: "Permit required.", no: "No permit needed for sealing cracks." },
      { name: "Building a New Room or Extension", question: "", yes: "Permit required.", no: "" },
      { name: "Raising or Lowering a Structure", question: "", yes: "Permit required.", no: "" },
    ],
    environmental: [
      { name: "Installing Rainwater Harvesting Systems", question: "Are you connecting it to indoor plumbing?", yes: "Permit required.", no: "No permit typically needed for standalone rain barrels or garden irrigation systems." },
      { name: "Installing or Modifying a Septic System", question: "Will the modifications affect capacity or drain field placement?", yes: "Permit required.", no: "No permit typically needed for minor maintenance like replacing a pump or baffle." },
      { name: "Energy Efficiency Improvements", question: "Are you making modifications to exterior walls or major systems?", yes: "Permit required (e.g., insulation changes affecting ventilation, upgrading HVAC).", no: "No permit typically needed for minor changes like LED bulbs, smart thermostats, or weather stripping." },
      { name: "Installing Geothermal Heating/Cooling", question: "Will it require underground drilling?", yes: "Permit required (due to environmental and utility considerations).", no: "No permit typically needed for heat pumps that use existing ductwork." },
      { name: "Installing a Green Roof", question: "Will it add significant weight to the structure?", yes: "Permit required (structural reinforcements may be needed).", no: "No permit typically needed for lightweight rooftop gardens in removable containers." },
      { name: "Installing Electric Vehicle Charging Stations", question: "Will it require a new circuit or electrical panel upgrade?", yes: "Permit required.", no: "No permit typically needed for plugging into an existing 120V outlet." },
      { name: "Installing Solar Panels or Wind Energy Systems", question: "Will it involve new structural supports or electrical modifications?", yes: "Permit required (for roof-mounted solar, battery storage, or wind turbines).", no: "No permit typically needed for small, portable solar panels or plug-in systems." },
    ],
    miscellaneous: [
      { name: "Changing the Exterior of the Home", question: "Are you changing materials in a historic district?", yes: "Permit required.", no: "No permit typically needed in non-restricted areas." },
      { name: "Installing a Home Elevator or Lift", question: "Are you modifying walls or electrical systems?", yes: "Permit required.", no: "No permit typically needed for stair lifts that don’t alter the structure." },
      { name: "Adding Skylights or Sun Tunnels", question: "Will you be cutting new openings in the roof?", yes: "Permit required.", no: "No permit typically needed for replacements." },
      { name: "Changing the Home's Electrical or Gas Service", question: "Will this require utility company approval or service upgrades?", yes: "Permit required.", no: "No permit typically needed for basic fixture replacements." },
      { name: "Home Security System Installation", question: "Will it involve new electrical wiring or hardwired components?", yes: "Permit required.", no: "No permit typically needed for wireless systems." },
      ],
    };

    let selectedProject = null;

    function handleCategoryChange() {
      const category = document.getElementById("category").value;
      const projectDropdown = document.getElementById("project");
      const projectContainer = document.getElementById("project-container");
      const followUpContainer = document.getElementById("follow-up-container");
      const resultDiv = document.getElementById("result");

      selectedProject = null;
      followUpContainer.style.display = "none";
      resultDiv.style.display = "none";
      resultDiv.innerHTML = "";
      projectDropdown.innerHTML = '<option value="" selected disabled>Select a project</option>';

      if (categories[category]) {
        categories[category].forEach((project, index) => {
          const option = document.createElement("option");
          option.value = index;
          option.textContent = project.name;
          projectDropdown.appendChild(option);
        });
        projectContainer.style.display = "block";
      } else {
        projectContainer.style.display = "none";
      }
    }

    function handleProjectChange() {
      const projectIndex = document.getElementById("project").value;
      const category = document.getElementById("category").value;
      const followUpContainer = document.getElementById("follow-up-container");
      const questionDiv = document.getElementById("question");
      const resultDiv = document.getElementById("result");

      resultDiv.style.display = "none";

      if (categories[category] && categories[category][projectIndex]) {
        selectedProject = categories[category][projectIndex];
        if (selectedProject.question) {
          questionDiv.innerHTML = selectedProject.question;
          followUpContainer.style.display = "block";
        } else {
          resultDiv.style.display = "block";
          resultDiv.innerHTML = selectedProject.yes;
          followUpContainer.style.display = "none";
        }
      }
    }

    function setResult(answer) {
      const resultDiv = document.getElementById("result");
      if (selectedProject) {
        resultDiv.style.display = "block";
        if (answer === "yes") {
          resultDiv.style.backgroundColor = "#f8d7da"; // Light red
          resultDiv.style.color = "#721c24"; // Dark red text
          resultDiv.innerHTML = `<span>${selectedProject.yes}</span>`;
        } else {
          resultDiv.style.backgroundColor = "#d1ecf1"; // Light blue
          resultDiv.style.color = "#0c5460"; // Dark blue text
          resultDiv.innerHTML = `<span>${selectedProject.no}</span>`;
        }
      }
    }
  </script>
</div>
